/**
 * Anti-Jitter CSS
 *
 * This stylesheet prevents screen jitter and improves the visual stability
 * of the Evolve Acoustics website through several optimizations.
 */

/* Content-Visibility Control - Improve rendering performance */
.content-block {
  content-visibility: auto;
  contain-intrinsic-size: 1px 1000px; /* Reserve space for content */
}

/* Force hardware acceleration for smoother animations and scrolling */
body {
  -webkit-transform: translateZ(0);
  -moz-transform: translateZ(0);
  -ms-transform: translateZ(0);
  -o-transform: translateZ(0);
  transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  -moz-backface-visibility: hidden;
  -ms-backface-visibility: hidden;
  backface-visibility: hidden;
  -webkit-perspective: 1000;
  -moz-perspective: 1000;
  -ms-perspective: 1000;
  perspective: 1000;
}

/* Prevent CLS (Cumulative Layout Shift) for images */
img, picture, video, canvas, svg {
  display: block;
  max-width: 100%;
  height: auto;
}

/* Pre-define aspect ratio for common elements to prevent layout shifts */
.blog-card-image {
  aspect-ratio: 16 / 9;
  overflow: hidden;
}

/* Prevent font-based layout shifts */
html {
  font-size: 100%; /* Ensures consistent base font size */
  text-size-adjust: 100%; /* Prevents mobile browsers from automatically adjusting font sizes */
  -webkit-text-size-adjust: 100%;
  -moz-text-size-adjust: 100%;
}

/* Improve scrolling performance */
html, body {
  overflow-x: hidden; /* Prevent horizontal scrolling */
  scroll-behavior: smooth;
}

/* Reduce paint area by isolating elements that change often */
.animated-element,
.hover-effect,
.blog-card:hover {
  will-change: transform;
  transform: translateZ(0);
  isolation: isolate; /* Create a new stacking context */
}

/* Prevent image-based layout shifts by using object-fit */
.blog-card-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Prevent text-rendering flicker */
body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Prevent animation jitter */
@media screen and (prefers-reduced-motion: no-preference) {
  .transition-element {
    transition-duration: 0.25s;
    transition-timing-function: cubic-bezier(0.4, 0.0, 0.2, 1);
  }
}
