window.addPassiveEventListener(document,"DOMContentLoaded",function(){function e(){var e=window.location.pathname;return e.includes("/pages/blogs/")?"../../":e.includes("/pages/")||e.includes("/templates/")?"../":""}function t(t){for(let e of document.querySelectorAll('link[rel="stylesheet"]'))if(e.href.includes(t))return void console.log("CSS already loaded: "+t);let e=document.createElement("link");e.rel="stylesheet",e.href=t,document.head.appendChild(e),console.log("Visual fixes CSS loaded: "+t)}t(e()+"css/visual-fixes.css"),t(e()+"css/enhanced-visual-fixes.css");function o(){var e,t=document.querySelector(".blog-grid");t&&(console.log("Applying visual fixes to blog grid"),(e=document.querySelectorAll(".blog-card")).length)&&(e.forEach(e=>{e.style.opacity="1",e.style.visibility="visible",e.style.display="flex",e.style.flexDirection="column";var t=e.querySelector(".blog-card-content"),t=(t&&(t.style.flexGrow="1"),e.querySelector(".blog-card-image"));t&&(t.style.height="200px",t.style.overflow="hidden")}),!(e=document.querySelectorAll(".pagination a")).length||Array.from(e).some(e=>"1"===e.textContent&&e.classList.contains("active"))||-1<window.location.href.indexOf("page=1")||!window.location.href.match(/page=[2-9]/))&&(console.log("Detected page 1, applying special grid fixes"),t.style.display="grid",t.style.gridTemplateColumns="repeat(auto-fill, minmax(300px, 1fr))",t.style.gap="30px",t.style.gridAutoRows="1fr")}function l(){if("IntersectionObserver"in window){let o=new IntersectionObserver((e,t)=>{e.forEach(e=>{var t;e.isIntersecting&&((t=(e=e.target).getAttribute("data-src"))&&(e.src=t,e.removeAttribute("data-src"),e.classList.add("loaded")),o.unobserve(e))})});document.querySelectorAll("img[data-src]").forEach(e=>{o.observe(e)}),document.querySelectorAll("img:not([loading])").forEach(e=>{e.hasAttribute("loading")||e.classList.contains("logo-img")||e.setAttribute("loading","lazy")})}else document.querySelectorAll("img[data-src]").forEach(e=>{e.src=e.getAttribute("data-src"),e.removeAttribute("data-src")})}function i(){document.querySelector(".service-grid")&&(console.log("Applying visual fixes to service grid"),document.querySelectorAll(".service-card, .application-card").forEach(e=>{e.style.display="flex",e.style.flexDirection="column",e.style.height="100%";e=e.querySelector(".service-card-content, .application-content");e&&(e.style.flexGrow="1")}))}function r(){var e=document.querySelector(".contact-form");e&&(console.log("Applying visual fixes to contact page"),e.querySelectorAll("input, textarea").forEach(e=>{e.style.width="100%",e.style.boxSizing="border-box"}),e=document.querySelector(".map-container"))&&(e.style.width="100%",e.style.height="400px",e.style.maxWidth="100%")}o(),l(),i(),r(),setTimeout(()=>{o(),l(),i(),r()},500),window.addPassiveEventListener(window,"resize",()=>{o(),i(),r()},!0),window.addPassiveEventListener(window,"load",()=>{o(),l(),i(),r()},!0),console.log("Evolve Acoustics visual fixes loaded: "+(new Date).toLocaleString())});